<html class="js no-touchevents cssanimations csspointerevents csstransforms supports csstransforms3d preserve3d csstransitions" style="" lang="en-US"><!--<![endif]--><head>
  
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scraping for Craft Beers: A Dataset Creation Tutorial | No Free Hunch</title>
<link rel="pingback" href="http://blog.kaggle.com/xmlrpc.php"><link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
<link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="No Free Hunch » Feed" href="http://blog.kaggle.com/feed/">
<link rel="alternate" type="application/rss+xml" title="No Free Hunch » Comments Feed" href="http://blog.kaggle.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="No Free Hunch » Scraping for Craft Beers: A Dataset Creation Tutorial Comments Feed" href="http://blog.kaggle.com/2017/01/31/scraping-for-craft-beers-a-dataset-creation-tutorial/feed/">
    <script async="" src="?cf_action=sync_comments&amp;post_id=6458"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript">
      window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/blog.kaggle.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.3"}};
      !function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
    </script><script src="http://blog.kaggle.com/wp-includes/js/wp-emoji-release.min.js?ver=4.7.3" type="text/javascript" defer=""></script>
    <style type="text/css">
img.wp-smiley,
img.emoji {
  display: inline !important;
  border: none !important;
  box-shadow: none !important;
  height: 1em !important;
  width: 1em !important;
  margin: 0 .07em !important;
  vertical-align: -0.1em !important;
  background: none !important;
  padding: 0 !important;
}
</style>
<link rel="stylesheet" id="flick-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/mailchimp//css/flick/flick.css?ver=4.7.3" type="text/css" media="all">
<link rel="stylesheet" id="mailchimpSF_main_css-css" href="http://blog.kaggle.com/?mcsf_action=main_css&amp;ver=4.7.3" type="text/css" media="all">
<!--[if IE]>
<link rel='stylesheet' id='mailchimpSF_ie_css-css'  href='http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/mailchimp/css/ie.css?ver=4.7.3' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="style_main-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wp-gif-player/style.css?ver=1481361617" type="text/css" media="all">
<link rel="stylesheet" id="wp-quicklatex-format-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wp-quicklatex/css/quicklatex-format.css?ver=4.7.3" type="text/css" media="all">
<link rel="stylesheet" id="responsiveslides-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/simple-responsive-slider/assets/css/responsiveslides.css?ver=4.7.3" type="text/css" media="all">
<link rel="stylesheet" id="wonderplugin-slider-css-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wonderplugin-slider-lite/engine/wonderpluginsliderengine.css?ver=4.7.3" type="text/css" media="all">
<link rel="stylesheet" id="x-stack-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/themes/x/framework/css/site/stacks/icon.css?ver=4.3.1" type="text/css" media="all">
<link rel="stylesheet" id="x-child-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/themes/x-child/style.css?ver=4.3.1" type="text/css" media="all">
<link rel="stylesheet" id="x-google-fonts-css" href="//fonts.googleapis.com/css?family=Open+Sans%3A400%2C400italic%2C700%2C700italic%7CLato%3A700&amp;subset=latin%2Clatin-ext&amp;ver=4.3.1" type="text/css" media="all">
<link rel="stylesheet" id="easy_table_style-css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/easy-table/themes/default/style.css?ver=1.6" type="text/css" media="all">
<link rel="stylesheet" id="bfa-font-awesome-css" href="//cdn.jsdelivr.net/fontawesome/4.7.0/css/font-awesome.min.css?ver=4.7.0" type="text/css" media="all">
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/mailchimp//js/scrollTo.js?ver=1.5.7"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-includes/js/jquery/jquery.form.min.js?ver=3.37.0"></script>
<script type="text/javascript">
/* <![CDATA[ */
var mailchimpSF = {"ajax_url":"http:\/\/blog.kaggle.com\/"};
/* ]]> */
</script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/mailchimp//js/mailchimp.js?ver=1.5.7"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-includes/js/jquery/ui/core.min.js?ver=1.11.4"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/mailchimp//js/datepicker.js?ver=4.7.3"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/simple-responsive-slider/assets/js/responsiveslides.min.js?ver=4.7.3"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wonderplugin-slider-lite/engine/wonderpluginsliderskins.js?ver=6.2"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wonderplugin-slider-lite/engine/wonderpluginslider.js?ver=6.2"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/themes/x/framework/js/dist/site/x-head.min.js?ver=4.3.1"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/cornerstone/assets/js/dist/site/cs-head.min.js?ver=1.1.3"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wp-quicklatex/js/wp-quicklatex-frontend.js?ver=1.0"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.5.2"></script>
<link rel="https://api.w.org/" href="http://blog.kaggle.com/wp-json/">
<link rel="canonical" href="http://blog.kaggle.com/2017/01/31/scraping-for-craft-beers-a-dataset-creation-tutorial/">
<link rel="shortlink" href="http://blog.kaggle.com/?p=6458">
<link rel="alternate" type="application/json+oembed" href="http://blog.kaggle.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fblog.kaggle.com%2F2017%2F01%2F31%2Fscraping-for-craft-beers-a-dataset-creation-tutorial%2F">
<link rel="alternate" type="text/xml+oembed" href="http://blog.kaggle.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fblog.kaggle.com%2F2017%2F01%2F31%2Fscraping-for-craft-beers-a-dataset-creation-tutorial%2F&amp;format=xml">
<script type="text/javascript">
        jQuery(function($) {
            $('.date-pick').each(function() {
                var format = $(this).data('format') || 'mm/dd/yyyy';
                format = format.replace(/yyyy/i, 'yy');
                $(this).datepicker({
                    autoFocusNextInput: true,
                    constrainInput: false,
                    changeMonth: true,
                    changeYear: true,
                    beforeShow: function(input, inst) { $('#ui-datepicker-div').addClass('show'); },
                    dateFormat: format.toLowerCase(),
                });
            });
            d = new Date();
            $('.birthdate-pick').each(function() {
                var format = $(this).data('format') || 'mm/dd';
                format = format.replace(/yyyy/i, 'yy');
                $(this).datepicker({
                    autoFocusNextInput: true,
                    constrainInput: false,
                    changeMonth: true,
                    changeYear: false,
                    minDate: new Date(d.getFullYear(), 1-1, 1),
                    maxDate: new Date(d.getFullYear(), 12-1, 31),
                    beforeShow: function(input, inst) { $('#ui-datepicker-div').removeClass('show'); },
                    dateFormat: format.toLowerCase(),
                });

            });

        });
    </script>
  <script type="text/javascript">
  jQuery(document).ready(function($) {
    $(function() {
      $(".rslides").responsiveSlides({
        auto: false,             // Boolean: Animate automatically, true or false
        speed: 500,            // Integer: Speed of the transition, in milliseconds
        timeout: 4000,          // Integer: Time between slide transitions, in milliseconds
        pager: true,           // Boolean: Show pager, true or false
        nav: true,             // Boolean: Show navigation, true or false
        random: false,          // Boolean: Randomize the order of the slides, true or false
        pause: false,           // Boolean: Pause on hover, true or false
        pauseControls: false,    // Boolean: Pause when hovering controls, true or false
        prevText: "Back",   // String: Text for the "previous" button
        nextText: "Next",       // String: Text for the "next" button
        maxwidth: "700",           // Integer: Max-width of the slideshow, in pixels
        navContainer: "",       // Selector: Where controls should be appended to, default is after the 'ul'
        manualControls: "",     // Selector: Declare custom pager navigation
        namespace: "rslides",   // String: Change the default namespace used
        before: function(){},   // Function: Before callback
        after: function(){}     // Function: After callback
      });
    });
   });
  </script>
  
<!-- Twitter Cards Meta - V 2.5.1 -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@kaggle">
<meta name="twitter:creator" content="@kaggle">
<meta name="twitter:url" content="http://blog.kaggle.com/2017/01/31/scraping-for-craft-beers-a-dataset-creation-tutorial/">
<meta name="twitter:title" content="Scraping for Craft Beers: A Dataset Creation Tutorial">
<meta name="twitter:description" content="I decided to mix business with pleasure and write a tutorial about how to scrape a craft beer dataset from a website in Python. This post is separated in two sections: scraping and tidying the [...]">
<meta name="twitter:image" content="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle.png">
<!-- Twitter Cards Meta By WPDeveloper.net -->


<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Scraping for Craft Beers: A Dataset Creation Tutorial">
<meta property="og:url" content="http://blog.kaggle.com/2017/01/31/scraping-for-craft-beers-a-dataset-creation-tutorial/">
<meta property="og:description" content="I decided to mix business with pleasure and write a tutorial about how to scrape a craft beer dataset from a website in Python. This post is separated in two sections: scraping and tidying the data…">
<meta property="article:published_time" content="2017-01-31T16:16:31+00:00">
<meta property="article:modified_time" content="2017-02-01T13:31:51+00:00">
<meta property="og:site_name" content="No Free Hunch">
<meta property="og:image" content="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle.png">
<meta property="og:image:width" content="1000">
<meta property="og:image:height" content="280">
<meta property="og:locale" content="en_US">
<link rel="stylesheet" type="text/css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b"><link rel="stylesheet" type="text/css" href="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b"><style type="text/css" id="syntaxhighlighteranchor"></style>
<!-- Google Analytics Tracking by Google Analyticator 6.5.2: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
    var analyticsFileTypes = [''];
    var analyticsSnippet = 'enabled';
    var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  
  _gaq.push(['_setAccount', 'UA-12629138-3']);
    _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<style id="x-generated-css" type="text/css">a,h1 a:hover,h2 a:hover,h3 a:hover,h4 a:hover,h5 a:hover,h6 a:hover,#respond .required,.x-pagination a:hover,.x-pagination span.current,.widget_tag_cloud .tagcloud a:hover,.widget_product_tag_cloud .tagcloud a:hover,.x-scroll-top:hover,.x-comment-author a:hover,.mejs-button button:hover{color:hsl(204,62%,57%);}a:hover{color:#00abd6;}a.x-img-thumbnail:hover,textarea:focus,input[type="text"]:focus,input[type="password"]:focus,input[type="datetime"]:focus,input[type="datetime-local"]:focus,input[type="date"]:focus,input[type="month"]:focus,input[type="time"]:focus,input[type="week"]:focus,input[type="number"]:focus,input[type="email"]:focus,input[type="url"]:focus,input[type="search"]:focus,input[type="tel"]:focus,input[type="color"]:focus,.uneditable-input:focus,.x-pagination a:hover,.x-pagination span.current,.widget_tag_cloud .tagcloud a:hover,.widget_product_tag_cloud .tagcloud a:hover,.x-scroll-top:hover{border-color:hsl(204,62%,57%);}.flex-direction-nav a,.flex-control-nav a:hover,.flex-control-nav a.flex-active,.x-dropcap,.x-skill-bar .bar,.x-pricing-column.featured h2,.x-portfolio-filters,.x-entry-share .x-share:hover,.widget_price_filter .ui-slider .ui-slider-range,.mejs-time-current{background-color:hsl(204,62%,57%);}.x-portfolio-filters:hover{background-color:#00abd6;}.entry-title:before{display:none;}.x-navbar .desktop .x-nav > li > a,.x-navbar .desktop .sub-menu a,.x-navbar .mobile .x-nav li a{color:#999999;}.x-navbar .desktop .x-nav > li > a:hover,.x-navbar .desktop .x-nav > .x-active > a,.x-navbar .desktop .x-nav > .current-menu-item > a,.x-navbar .desktop .sub-menu a:hover,.x-navbar .desktop .sub-menu .x-active > a,.x-navbar .desktop .sub-menu .current-menu-item > a,.x-navbar .desktop .x-nav .x-megamenu > .sub-menu > li > a,.x-navbar .mobile .x-nav li > a:hover,.x-navbar .mobile .x-nav .x-active > a,.x-navbar .mobile .x-nav .current-menu-item > a{color:#272727;}.x-navbar .desktop .x-nav > li > a{height:90px;padding-top:37px;}.x-navbar .desktop .x-nav > li ul{top:90px;}.x-comment-author,.x-comment-time,.comment-form-author label,.comment-form-email label,.comment-form-url label,.comment-form-rating label,.comment-form-comment label{font-family:"Lato","Helvetica Neue",Helvetica,sans-serif;;}.x-comment-time,.entry-thumb:before,.p-meta{color:#5e5e5e;}.entry-title a:hover,.x-comment-author,.x-comment-author a,.comment-form-author label,.comment-form-email label,.comment-form-url label,.comment-form-rating label,.comment-form-comment label,.x-accordion-heading .x-accordion-toggle,.x-nav-tabs > li > a:hover,.x-nav-tabs > .active > a,.x-nav-tabs > .active > a:hover,.mejs-button button{color:#272727;}.h-comments-title small,.h-feature-headline span i,.x-portfolio-filters-menu,.mejs-time-loaded{background-color:#272727 !important;}@media (min-width:1200px){.x-sidebar{width:295px;}body.x-sidebar-content-active,body[class*="page-template-template-blank"].x-sidebar-content-active.x-blank-template-sidebar-active{padding-left:295px;}body.x-content-sidebar-active,body[class*="page-template-template-blank"].x-content-sidebar-active.x-blank-template-sidebar-active{padding-right:295px;}body.x-sidebar-content-active .x-widgetbar,body.x-sidebar-content-active .x-navbar-fixed-top,body[class*="page-template-template-blank"].x-sidebar-content-active.x-blank-template-sidebar-active .x-widgetbar,body[class*="page-template-template-blank"].x-sidebar-content-active.x-blank-template-sidebar-active .x-navbar-fixed-top{left:295px;}body.x-content-sidebar-active .x-widgetbar,body.x-content-sidebar-active .x-navbar-fixed-top,body[class*="page-template-template-blank"].x-content-sidebar-active.x-blank-template-sidebar-active .x-widgetbar,body[class*="page-template-template-blank"].x-content-sidebar-active.x-blank-template-sidebar-active .x-navbar-fixed-top{right:295px;}}@media (max-width:979px){}body{font-size:14px;font-style:normal;font-weight:400;color:#5e5e5e;background-color:#ededed;}a:focus,select:focus,input[type="file"]:focus,input[type="radio"]:focus,input[type="submit"]:focus,input[type="checkbox"]:focus{outline:thin dotted #333;outline:5px auto hsl(204,62%,57%);outline-offset:-1px;}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:"Lato",sans-serif;font-style:normal;font-weight:700;}h1,.h1{letter-spacing:-0.035em;}h2,.h2{letter-spacing:-0.035em;}h3,.h3{letter-spacing:-0.035em;}h4,.h4{letter-spacing:-0.035em;}h5,.h5{letter-spacing:-0.035em;}h6,.h6{letter-spacing:-0.035em;}.w-h{font-weight:700 !important;}.x-container.width{width:87%;}.x-container.max{max-width:1200px;}.x-main.full{float:none;display:block;width:auto;}@media (max-width:979px){.x-main.full,.x-main.left,.x-main.right,.x-sidebar.left,.x-sidebar.right{float:none;display:block;width:auto !important;}}.entry-header,.entry-content{font-size:14px;}body,input,button,select,textarea{font-family:"Open Sans",sans-serif;}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,h1 a,h2 a,h3 a,h4 a,h5 a,h6 a,.h1 a,.h2 a,.h3 a,.h4 a,.h5 a,.h6 a,blockquote{color:#272727;}.cfc-h-tx{color:#272727 !important;}.cfc-h-bd{border-color:#272727 !important;}.cfc-h-bg{background-color:#272727 !important;}.cfc-b-tx{color:#5e5e5e !important;}.cfc-b-bd{border-color:#5e5e5e !important;}.cfc-b-bg{background-color:#5e5e5e !important;}.x-btn-widgetbar{border-top-color:#000000;border-right-color:#000000;}.x-btn-widgetbar:hover{border-top-color:#444444;border-right-color:#444444;}.x-navbar-inner{min-height:90px;}.x-brand{margin-top:22px;font-family:"Lato",sans-serif;font-size:42px;font-style:normal;font-weight:700;letter-spacing:-0.035em;color:#466c86;}.x-brand:hover,.x-brand:focus{color:#466c86;}.x-navbar .x-nav-wrap .x-nav > li > a{font-family:"Lato",sans-serif;font-style:normal;font-weight:700;letter-spacing:0.085em;text-transform:uppercase;}.x-navbar .desktop .x-nav > li > a{font-size:13px;}.x-navbar .desktop .x-nav > li > a:not(.x-btn-navbar-woocommerce){padding-left:20px;padding-right:20px;}.x-navbar .desktop .x-nav > li > a > span{padding-right:calc(1.25em - 0.085em);}.x-btn-navbar{margin-top:20px;}.x-btn-navbar,.x-btn-navbar.collapsed{font-size:24px;}@media (max-width:979px){.x-widgetbar{left:0;right:0;}}.x-btn,.button,[type="submit"]{color:#ffffff;border-color:rgb(0,138,188);background-color:rgb(32,190,255);text-shadow:0 0.075em 0.075em rgba(0,0,0,0.5);border-radius:0.25em;}.x-btn:hover,.button:hover,[type="submit"]:hover{color:#ffffff;border-color:rgb(0,138,188);background-color:rgb(32,190,255);text-shadow:0 0.075em 0.075em rgba(0,0,0,0.5);}.x-btn.x-btn-real,.x-btn.x-btn-real:hover{margin-bottom:0.25em;text-shadow:0 0.075em 0.075em rgba(0,0,0,0.65);}.x-btn.x-btn-real{box-shadow:0 0.25em 0 0 #a71000,0 4px 9px rgba(0,0,0,0.75);}.x-btn.x-btn-real:hover{box-shadow:0 0.25em 0 0 #a71000,0 4px 9px rgba(0,0,0,0.75);}.x-btn.x-btn-flat,.x-btn.x-btn-flat:hover{margin-bottom:0;text-shadow:0 0.075em 0.075em rgba(0,0,0,0.65);box-shadow:none;}.x-btn.x-btn-transparent,.x-btn.x-btn-transparent:hover{margin-bottom:0;border-width:3px;text-shadow:none;text-transform:uppercase;background-color:transparent;box-shadow:none;}.h-widget:before,.x-flickr-widget .h-widget:before,.x-dribbble-widget .h-widget:before{position:relative;font-weight:normal;font-style:normal;line-height:1;text-decoration:inherit;-webkit-font-smoothing:antialiased;speak:none;}.h-widget:before{padding-right:0.4em;font-family:"fontawesome";}.x-flickr-widget .h-widget:before,.x-dribbble-widget .h-widget:before{top:0.025em;padding-right:0.35em;font-family:"foundationsocial";font-size:0.785em;}.widget_archive .h-widget:before{content:"\f040";top:-0.045em;font-size:0.925em;}.widget_calendar .h-widget:before{content:"\f073";top:-0.0825em;font-size:0.85em;}.widget_categories .h-widget:before,.widget_product_categories .h-widget:before{content:"\f02e";font-size:0.95em;}.widget_nav_menu .h-widget:before,.widget_layered_nav .h-widget:before{content:"\f0c9";}.widget_meta .h-widget:before{content:"\f0fe";top:-0.065em;font-size:0.895em;}.widget_pages .h-widget:before{content:"\f0f6";top:-0.065em;font-size:0.85em;}.widget_recent_reviews .h-widget:before,.widget_recent_comments .h-widget:before{content:"\f086";top:-0.065em;font-size:0.895em;}.widget_recent_entries .h-widget:before{content:"\f02d";top:-0.045em;font-size:0.875em;}.widget_rss .h-widget:before{content:"\f09e";padding-right:0.2em;}.widget_search .h-widget:before,.widget_product_search .h-widget:before{content:"\f0a4";top:-0.075em;font-size:0.85em;}.widget_tag_cloud .h-widget:before,.widget_product_tag_cloud .h-widget:before{content:"\f02c";font-size:0.925em;}.widget_text .h-widget:before{content:"\f054";padding-right:0.4em;font-size:0.925em;}.x-dribbble-widget .h-widget:before{content:"\f009";}.x-flickr-widget .h-widget:before{content:"\f010";padding-right:0.35em;}.widget_best_sellers .h-widget:before{content:"\f091";top:-0.0975em;font-size:0.815em;}.widget_shopping_cart .h-widget:before{content:"\f07a";top:-0.05em;font-size:0.945em;}.widget_products .h-widget:before{content:"\f0f2";top:-0.05em;font-size:0.945em;}.widget_featured_products .h-widget:before{content:"\f0a3";}.widget_layered_nav_filters .h-widget:before{content:"\f046";top:1px;}.widget_onsale .h-widget:before{content:"\f02b";font-size:0.925em;}.widget_price_filter .h-widget:before{content:"\f0d6";font-size:1.025em;}.widget_random_products .h-widget:before{content:"\f074";font-size:0.925em;}.widget_recently_viewed_products .h-widget:before{content:"\f06e";}.widget_recent_products .h-widget:before{content:"\f08d";top:-0.035em;font-size:0.9em;}.widget_top_rated_products .h-widget:before{content:"\f075";top:-0.145em;font-size:0.885em;}h1 { font-size: 35px; }
h2 { font-size: 30px; }
h3 { font-size: 20px; }

.entry-footer {
    margin: auto;
    width: 60%;
    padding: 5px;
}

.entry-featured {
  border:0;
}</style><script type="text/javascript" async="" src="//kaggle.disqus.com/embed.js"></script><script async="" type="text/javascript" src="//kaggle.disqus.com/count.js"></script><style type="text/css"></style><link rel="prefetch" href="https://c.disquscdn.com/next/embed/styles/lounge.1338080c7d626298e3eb715cb658042e.css"><link rel="prefetch" href="https://c.disquscdn.com/next/embed/common.bundle.d46ded1fb0604b10063c95567fa0d433.js"><link rel="prefetch" href="https://c.disquscdn.com/next/embed/lounge.bundle.8b781bc5a49fa23f31cc1630fd043538.js"><link rel="prefetch" href="https://disqus.com/next/config.js"></head>

<body class="post-template-default single single-post postid-6458 single-format-standard x-icon x-navbar-static-active x-full-width-layout-active x-sidebar-content-active x-v4_3_1 x-child-theme-active cornerstone-v1_1_3">

  
  <div id="top" class="site">

  
  
  <header class="masthead masthead-inline" role="banner">
    
    

  <div class="x-navbar-wrap">
    <div class="x-navbar">
      <div class="x-navbar-inner">
        <div class="x-container max width">
          

<a href="http://blog.kaggle.com/" class="x-brand text" title="The Official Blog of Kaggle.com">
  No Free Hunch</a>          
<a href="#" class="x-btn-navbar collapsed" data-toggle="collapse" data-target=".x-nav-wrap.mobile">
  <i class="x-icon-bars" data-x-icon=""></i>
  <span class="visually-hidden">Navigation</span>
</a>

<nav class="x-nav-wrap desktop" role="navigation">
  <ul id="menu-header-menu" class="x-nav"><li id="menu-item-5387" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5387"><a target="_blank" href="http://www.kaggle.com"><span>kaggle.com</span></a></li>
</ul></nav>

<div class="x-nav-wrap mobile collapse">
  <ul id="menu-header-menu-1" class="x-nav"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5387"><a target="_blank" href="http://www.kaggle.com"><span>kaggle.com</span></a></li>
</ul></div>        </div>
      </div>
    </div>
  </div>

    
  
    <div class="x-breadcrumb-wrap">
      <div class="x-container max width">

        <div class="x-breadcrumbs"><a href="http://blog.kaggle.com"><span class="home"><i class="x-icon-home" data-x-icon=""></i></span></a> <span class="delimiter"><i class="x-icon-angle-right" data-x-icon=""></i></span> <span class="current">Scraping for Craft Beers: A Dataset Creation Tutorial</span></div>
                  
  <div class="x-nav-articles">

          <a href="http://blog.kaggle.com/2017/02/06/seizure-prediction-competition-first-place-winners-interview-team-not-so-random-anymore-andriy-alexandre-feng-gilberto/" title="" class="prev">
        <i class="x-icon-arrow-left" data-x-icon=""></i>      </a>
    
          <a href="http://blog.kaggle.com/2017/01/26/open-data-spotlight-the-global-terrorism-database/" title="" class="next">
        <i class="x-icon-arrow-right" data-x-icon=""></i>      </a>
    
  </div>

          
      </div>
    </div>

    </header>

    
  <div class="x-main full" role="main">

          
<article id="post-6458" class="post-6458 post type-post status-publish format-standard has-post-thumbnail hentry category-tutorials tag-open-data tag-python tag-tutorial tag-web-scraping">
  <div class="entry-wrap">
    <a href="http://blog.kaggle.com/2017/01/31/scraping-for-craft-beers-a-dataset-creation-tutorial/#comments" title="Leave a comment on: “Scraping for Craft Beers: A Dataset Creation Tutorial”" class="meta-comments">25</a>    <div class="x-container max width">
      
<header class="entry-header">
      <h1 class="entry-title">Scraping for Craft Beers: A Dataset Creation Tutorial</h1>
    <p class="p-meta"><span><a href="http://blog.kaggle.com/author/jnhould/">Jean-Nicholas Hould</a></span>|<span><time class="entry-date" datetime="2017-01-31T08:16:31+00:00">01.31.2017</time></span></p>  </header>            <div class="entry-featured">
        <div class="entry-thumb"><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle.png" class="attachment-entry size-entry wp-post-image" alt="Craft Beer Scraping Open Data Tutorial on Kaggle" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle.png 1000w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle-300x84.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle-768x215.png 768w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/craft_beer_scraping_dataset_kaggle-100x28.png 100w" sizes="(max-width: 1000px) 100vw, 1000px" width="1000" height="280"></div>      </div>
            


<div class="entry-content content">


  <p align="center"><em>Whether it's for work, learning, or just fun, many data projects begin with tracking down the right dataset. In this tutorial, <a href="https://www.kaggle.com/nickhould" target="_blank">Jean-Nicholas Hould</a> shares how he scraped <a href="https://www.kaggle.com/nickhould/craft-cans" target="_blank">the craft beer dataset he published on Kaggle</a> for anyone to enjoy and analyze. His tutorial, <a href="http://www.jeannicholashould.com/" target="_blank">originally posted on his blog</a>, is the perfect guide to help get you started on your own project.</em></p>
<p><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider.png" alt="" class="aligncenter size-full wp-image-6230" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider.png 1000w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider-300x8.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider-768x19.png 768w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider-100x3.png 100w" sizes="(max-width: 1000px) 100vw, 1000px" width="1000" height="25"></p>
<p>If you have read some of my posts in the past, you know by now that I enjoy a good craft beer. I decided to mix business with pleasure and write a tutorial about how to scrape a craft beer dataset from a website in Python.</p>
<p>This post is separated in two sections: scraping and tidying the data. In the first part, we’ll plan and write the code to collect a dataset from a website. In the second part, we’ll apply the “tidy data” principles to this freshly scraped dataset. At the end of this post, we’ll have a clean dataset of craft beers.</p>
<h2 id="web-scraping">Web Scraping</h2>
<p>A web scraper is a piece of code that will automatically load web pages and pull specific data for you. The web scraper will do a repetitive task that would otherwise be too long for you to manually do.</p>
<p>For example, we could code a web scraper that will pull a list of product names and their rating from an e-commerce website and write them in a CSV file. Scraping a website is a great way to acquire a new dataset that would otherwise be unavailable.</p>
<h3 id="a-few-rules-on-scraping">A few rules on scraping</h3>
<p>As Greg Reda pointed out a few years ago <a href="http://www.gregreda.com/2013/03/03/web-scraping-101-with-python/">in his excellent web scraping tutorial</a>, there are a few rules that you need to know about scraping:</p>
<ol>
<li>Respect the website terms &amp; conditions.</li>
<li>Don’t stress the servers. <em>A scraper can make thousands of web page requests in a second. Make sure you don’t put too much pressure on the server.</em></li>
<li>Your scraper code will break. <em>Web pages change often. Your scraper code will be outdated soon.</em></li>
</ol>
<h3 id="planning">Planning</h3>
<p>The first step in building a scraper is the planning phase. Obviously, you want to decide what data that you want to pull and from which website.</p>
<p>In our case, we want to pull data from a website called <a href="http://craftcans.com/db.php?search=all&amp;sort=beerid&amp;ord=desc&amp;view=text">CraftCans</a>. This website lists 2692 craft canned beers. For this specific dataset, we wouldn’t need to build a scraper to pull the data. The way it’s laid out, we could easily copy and paste it into an Excel spreadsheet.</p>
<p><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCans-1024x728.png" alt="Craft cans" class="aligncenter size-large wp-image-6461" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCans-1024x728.png 1024w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCans-300x213.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCans-768x546.png 768w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCans-100x71.png 100w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCans-1184x842.png 1184w" sizes="(max-width: 1024px) 100vw, 1024px" width="1024" height="728"></p>
<p>For each beer, the website presents some details:</p>
<ul>
<li>Name</li>
<li>Style</li>
<li>Size</li>
<li>Alcohol by volume (ABV)</li>
<li>IBU’s</li>
<li>Brewer name</li>
<li>Brewer location</li>
</ul>
<h4 id="inspect-the-html">Inspect the HTML</h4>
<p>We’d like our scraper to pull all of this information for us. In order to give our scraper specific instructions, we need to look at the HTML code of CraftCans website. Most modern web browser offer a way to inspect the HTML source code of a web page by right click on the page.</p>
<p>On Google Chrome, you can right click on an element in a web page and the click on “Inspect” to see the HTML code.</p>
<p><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/ChromeInspect.png" alt="Chrome inspect" class="aligncenter size-full wp-image-6460" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/ChromeInspect.png 597w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/ChromeInspect-300x159.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/ChromeInspect-100x53.png 100w" sizes="(max-width: 597px) 100vw, 597px" width="597" height="316"></p>
<h4 id="identify-patterns">Identify patterns</h4>
<p>Looking at the HTML code on the main page, you can see that this big list of beer is in fact an HTML table. Each beer represents a row in this table. Generally, a repeating pattern, such as an HTML table, is ideal for web scraping because the logic is straightforward.</p>
<p><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCansCode.png" alt="Craft cans code" class="aligncenter size-full wp-image-6459" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCansCode.png 760w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCansCode-300x242.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/CraftCansCode-100x81.png 100w" sizes="(max-width: 760px) 100vw, 760px" width="760" height="613"></p>
<h3 id="libraries-used">Libraries used</h3>
<p>For this project, we’ll import four libraries.</p>
<div><div id="highlighter_766570" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">from</code> <code class="python plain">urllib.request </code><code class="python keyword">import</code> <code class="python plain">urlopen</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python keyword">from</code> <code class="python plain">bs4 </code><code class="python keyword">import</code> <code class="python plain">BeautifulSoup</code></div><div class="line number4 index3 alt1"><code class="python keyword">import</code> <code class="python plain">pandas as pd</code></div><div class="line number5 index4 alt2"><code class="python keyword">import</code> <code class="python plain">re</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python comments"># Python 3.5.2 :: Anaconda 4.2.0 (x86_64)</code></div><div class="line number8 index7 alt1"><code class="python comments"># pandas==0.18.1</code></div><div class="line number9 index8 alt2"><code class="python comments"># beautifulsoup4==4.5.1</code></div></div></td></tr></tbody></table></div></div>
<p><strong>urlopen</strong></p>
<p>The first one <code class="highlighter-rouge">urlopen</code> will be used to request an HTML page on the web and return it’s content. That’s it.</p>
<p><strong>BeautifulSoup4</strong></p>
<p>The second one, <code class="highlighter-rouge">BeautifulSoup4</code>, is a library that makes it easy to navigate in an HTML document. For example, with this library you can easily select a table in an HTML document and iterate over its rows.</p>
<p><strong>pandas</strong></p>
<p>The third one is <code class="highlighter-rouge">pandas</code>. We will not use this library for the scraping part. We will use it for the tidying part. <code class="highlighter-rouge">pandas</code> is a library designed to facilitate data manipulation and analysis.</p>
<p><strong>re for regular expressions</strong></p>
<p>Finally, we’ll be using <code class="highlighter-rouge">re</code> which is part of the Python Standard Library. This lib provides regular expression matching operations. Regular expressions are ways to manipulate strings. For example, we can use regular expressions to list all of the numbers in a string.</p>
<h2 id="write-the-code">Write the code</h2>
<h3 id="challenges-with-the-html">Challenges with the HTML</h3>
<p>After some investigation on CraftCans web page, I realized there is no clean ways to scrape the CraftCans website.</p>
<p>The HTML structure of CraftCans is kind of old school. The whole layout of the page is in tables. This was a common practice in the past but now the layout is generally set with some CSS.</p>
<p>Furthermore, there are no class or identifiers on the HTML table or rows that contains the beer entries. Pointing the scraper to the specific table that we want is challenging without a clean HTML structure or identifiers.</p>
<h4 id="solution-list-all-table-rows">Solution: List all table rows</h4>
<p>The solution I found to scrape the website is most likely not the cleanest but it works.</p>
<p>Since there are no identifiers on the table that contains the data, I use <code class="highlighter-rouge">BeautifulSoup4</code> <code class="highlighter-rouge">findAll</code> function to load all of the table rows <code class="highlighter-rouge">tr</code> present in the CraftCans page. This function returns an exhaustive list of table rows, whether or not they are from the table we want to scrape.</p>
<p>For each row, I run a test to determine whether or not it’s a row containing a beer entry or if it’s something else. The heuristic to determine if a row is a beer data entry is straightforward: the row needs to contain eight cells and the first cell must contain a valid numeric id.</p>
<div><div id="highlighter_834419" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments"># Determines if a table_row is a beer entry</code></div><div class="line number2 index1 alt1"><code class="python keyword">def</code> <code class="python plain">is_beer_entry(table_row):</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">row_cells </code><code class="python keyword">=</code> <code class="python plain">table_row.findAll(</code><code class="python string">"td"</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">beer_id </code><code class="python keyword">=</code> <code class="python plain">get_beer_id(row_cells[</code><code class="python value">0</code><code class="python plain">].text)</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python plain">( </code><code class="python functions">len</code><code class="python plain">(row_cells) </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">8</code> <code class="python keyword">and</code> <code class="python plain">beer_id )</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python comments"># Return the beer entry numerical identifier from the "Entry" column.</code></div><div class="line number8 index7 alt1"><code class="python keyword">def</code> <code class="python plain">get_beer_id(cell_value):</code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">r </code><code class="python keyword">=</code> <code class="python plain">re.match(</code><code class="python string">"^(\d{1,4})\.$"</code><code class="python plain">, cell_value)</code></div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">r </code><code class="python keyword">and</code> <code class="python functions">len</code><code class="python plain">(r.groups()) </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">1</code><code class="python plain">:</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">beer_id </code><code class="python keyword">=</code> <code class="python plain">r.group(</code><code class="python value">1</code><code class="python plain">)</code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python functions">int</code><code class="python plain">(beer_id)</code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">:</code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python color1">None</code></div></div></td></tr></tbody></table></div></div>
<p>Now that we have the functions to determine if a row is indeed a beer entry, we can now scrape the whole web page. We need to decide in which format we want to store the collected data from the website.  I’d like to have a JSON document like this one for each beer entry in CraftCans.</p>
<h3 id="example-beer-json-entry">Example Beer JSON Entry</h3>
<div><div id="highlighter_490247" class="syntaxhighlighter  plain"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">{</code></div><div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"id": 2692,</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"name": "Get Together",</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"brewery_name": "NorthGate Brewing",</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"brewery_location": "Minneapolis, MN",</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"style": "American IPA",</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"size": "16 oz.",</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"abv": "4.5%",</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">"ibu": "50",</code></div><div class="line number10 index9 alt1"><code class="plain plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>The reason I like to store the data in JSON document is because I can easily transform them into a pandas <code class="highlighter-rouge">DataFrame</code>.</p>
<div><div id="highlighter_511700" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">get_all_beers(html_soup):</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">beers </code><code class="python keyword">=</code> <code class="python plain">[]</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">all_rows_in_html_page </code><code class="python keyword">=</code> <code class="python plain">html_soup.findAll(</code><code class="python string">"tr"</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">for</code> <code class="python plain">table_row </code><code class="python keyword">in</code> <code class="python plain">all_rows_in_html_page:</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">is_beer_entry(table_row):</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">row_cells </code><code class="python keyword">=</code> <code class="python plain">table_row.findAll(</code><code class="python string">"td"</code><code class="python plain">)</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">beer_entry </code><code class="python keyword">=</code> <code class="python plain">{</code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"id"</code><code class="python plain">: get_beer_id(row_cells[</code><code class="python value">0</code><code class="python plain">].text),</code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"name"</code><code class="python plain">: row_cells[</code><code class="python value">1</code><code class="python plain">].text,</code></div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"brewery_name"</code><code class="python plain">: row_cells[</code><code class="python value">2</code><code class="python plain">].text,</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"brewery_location"</code><code class="python plain">: row_cells[</code><code class="python value">3</code><code class="python plain">].text,</code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"style"</code><code class="python plain">: row_cells[</code><code class="python value">4</code><code class="python plain">].text,</code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"size"</code><code class="python plain">: row_cells[</code><code class="python value">5</code><code class="python plain">].text,</code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"abv"</code><code class="python plain">: row_cells[</code><code class="python value">6</code><code class="python plain">].text,&nbsp;&nbsp;&nbsp; </code></div><div class="line number15 index14 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"ibu"</code><code class="python plain">: row_cells[</code><code class="python value">7</code><code class="python plain">].text</code></div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">}</code></div><div class="line number17 index16 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">beers.append(beer_entry)</code></div><div class="line number18 index17 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python plain">beers</code></div></div></td></tr></tbody></table></div></div>
<h2 id="run-the-scraper">Run the Scraper</h2>
<p>Having our functions written, we can then request the CraftCans web page with <code class="highlighter-rouge">urlopen</code> and have our code take care of the rest.</p>
<div><div id="highlighter_797747" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">html </code><code class="python keyword">=</code> <code class="python plain">urlopen(</code><code class="python string">"<a href="http://craftcans.com/db.php?search=all&amp;sort=beerid&amp;ord=desc&amp;view=text">http://craftcans.com/db.php?search=all&amp;sort=beerid&amp;ord=desc&amp;view=text</a>"</code><code class="python plain">)</code></div><div class="line number2 index1 alt1"><code class="python plain">html_soup </code><code class="python keyword">=</code> <code class="python plain">BeautifulSoup(html, </code><code class="python string">'html.parser'</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python plain">beers_list </code><code class="python keyword">=</code> <code class="python plain">get_all_beers(html_soup)</code></div></div></td></tr></tbody></table></div></div>
<p>With the list of beers returned by <code class="highlighter-rouge">get_all_beers</code>, we can easily create a new <code class="highlighter-rouge">pandas</code> <em>DataFrame</em> to conveniently visualize and manipulate our data.</p>
<div><div id="highlighter_804790" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">df </code><code class="python keyword">=</code> <code class="python plain">pd.DataFrame(beers_list)</code></div><div class="line number2 index1 alt1"><code class="python plain">df.head(</code><code class="python value">5</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<h2 id="tidy-up">Tidy up</h2>
<p>In the scraping part, I didn’t bother to clean up the data. There are a few reasons for this. First, <code class="highlighter-rouge">pandas</code> is my tool of choice to manipulate the data. Secondly, I wanted to separate the concerns: scraping and cleaning.</p>
<p><a href="http://www.jeannicholashould.com/tidy-data-in-python.html">In a previous post</a>, I explained the concept of “tidy data”. This concept was initially presented by Hadley Wickham who describes a tidy dataset as one having the following attributes:</p>
<ul>
<li>Each <em>variable</em> forms a column and contains <em>values</em></li>
<li>Each <em>observation</em> forms a row</li>
<li>Each type of <em>observational unit</em> forms a table</li>
</ul>
<p>If you take a moment to look at the dataset we scraped so far, you will notice it’s messy. It does not conform to the properties of a “tidy dataset”. You will notice there are multiple observational units in the same table (beers and breweries), there are multiple variables in a single column (city and state), etc. In this section of the post, we’ll clean up the dataset.</p>
<table class="dataframe" border="1">
<thead>
<tr style="text-align: left;">
<th>abv</th>
<th>brewery_location</th>
<th>brewery_name</th>
<th>ibus</th>
<th>id</th>
<th>name</th>
<th>size</th>
<th>style</th>
</tr>
</thead>
<tbody>
<tr>
<td>4.5%</td>
<td>Minneapolis, MN</td>
<td>NorthGate Brewing</td>
<td>50</td>
<td>2692</td>
<td>Get Together</td>
<td>16 oz.</td>
<td>American IPA</td>
</tr>
<tr>
<td>4.9%</td>
<td>Minneapolis, MN</td>
<td>NorthGate Brewing</td>
<td>26</td>
<td>2691</td>
<td>Maggie's Leap</td>
<td>16 oz.</td>
<td>Milk / Sweet Stout</td>
</tr>
<tr>
<td>4.8%</td>
<td>Minneapolis, MN</td>
<td>NorthGate Brewing</td>
<td>19</td>
<td>2690</td>
<td>Wall's End</td>
<td>16 oz.</td>
<td>English Brown Ale</td>
</tr>
<tr>
<td>6.0%</td>
<td>Minneapolis, MN</td>
<td>NorthGate Brewing</td>
<td>38</td>
<td>2689</td>
<td>Pumpion</td>
<td>16 oz.</td>
<td>Pumpkin Ale</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<h2 id="beers--breweries-two-observational-units">Beers &amp; Breweries: Two Observational Units</h2>
<p>The most flagrant problem with the scraped dataset is that there are multiple observation units in the table: beers and breweries. The solution for this is to create two separate dataset.</p>
<h3 id="breweries">Breweries</h3>
<p>The <code class="highlighter-rouge">breweries</code> dataset is straightforward to create. We simply select the relevant columns in our scraped dataset, remove the duplicates and then reset the index. The reason we reset the index is to assign a unique identifier to each brewery. This will be useful when we’ll create the beer dataset because we’ll be able to associate each beer with a `brewery_id.</p>
<div><div id="highlighter_295635" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">breweries </code><code class="python keyword">=</code> <code class="python plain">df[[</code><code class="python string">"brewery_location"</code><code class="python plain">, </code><code class="python string">"brewery_name"</code><code class="python plain">]]</code></div><div class="line number2 index1 alt1"><code class="python plain">breweries </code><code class="python keyword">=</code> <code class="python plain">breweries.drop_duplicates().reset_index(drop</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python plain">breweries[</code><code class="python string">"id"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">breweries.index</code></div><div class="line number4 index3 alt1"><code class="python plain">breweries.head(</code><code class="python value">5</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<table class="dataframe" border="1">
<thead>
<tr style="text-align: left;">
<th></th>
<th>brewery_location</th>
<th>brewery_name</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Minneapolis, MN</td>
<td>NorthGate Brewing</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>Louisville, KY</td>
<td>Against the Grain Brewery</td>
<td>1</td>
</tr>
<tr>
<th>2</th>
<td>Framingham, MA</td>
<td>Jack's Abby Craft Lagers</td>
<td>2</td>
</tr>
<tr>
<th>3</th>
<td>San Diego, CA</td>
<td>Mike Hess Brewing Company</td>
<td>3</td>
</tr>
<tr>
<th>4</th>
<td>San Francisco, CA</td>
<td>Fort Point Beer Company</td>
<td>4</td>
</tr>
</tbody>
</table>
<h3 id="beers">Beers</h3>
<p>For the <code class="highlighter-rouge">beers</code> dataset, we want to replace all of the repetitive brewery information, such as the location and name, with a <code class="highlighter-rouge">brewery_id</code>. Previously, we created a dataset of <code class="highlighter-rouge">breweries</code> where each brewery has a unique <code class="highlighter-rouge">id</code>. It’s now time to use this identifier.</p>
<p>To match this <code class="highlighter-rouge">brewery_id</code> with the appropriate beer, we use the <code class="highlighter-rouge">merge</code> function in <code class="highlighter-rouge">pandas</code>. This function is similar to a <code class="highlighter-rouge">join</code> in SQL. In this function, we pass both the scraped dataset and the <code class="highlighter-rouge">breweries</code> dataset as function parameters. We also specify that we want to join both of these datasets on the <code class="highlighter-rouge">brewery_name</code> and <code class="highlighter-rouge">brewery_location</code>. This will result in a new <em>DataFrame</em>.</p>
<div><div id="highlighter_391902" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">beers </code><code class="python keyword">=</code> <code class="python plain">pd.merge(df,</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">breweries,</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">left_on</code><code class="python keyword">=</code><code class="python plain">[</code><code class="python string">"brewery_name"</code><code class="python plain">, </code><code class="python string">"brewery_location"</code><code class="python plain">],</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">right_on</code><code class="python keyword">=</code><code class="python plain">[</code><code class="python string">"brewery_name"</code><code class="python plain">, </code><code class="python string">"brewery_location"</code><code class="python plain">],</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">sort</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">,</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">suffixes</code><code class="python keyword">=</code><code class="python plain">(</code><code class="python string">'_beer'</code><code class="python plain">, </code><code class="python string">'_brewery'</code><code class="python plain">))</code></div><div class="line number7 index6 alt2"><code class="python plain">beers </code><code class="python keyword">=</code> <code class="python plain">beers[[</code><code class="python string">"abv"</code><code class="python plain">, </code><code class="python string">"ibu"</code><code class="python plain">, </code><code class="python string">"id_beer"</code><code class="python plain">,</code></div><div class="line number8 index7 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"name"</code><code class="python plain">, </code><code class="python string">"size"</code><code class="python plain">, </code><code class="python string">"style"</code><code class="python plain">, </code><code class="python string">"id_brewery"</code><code class="python plain">]]</code></div><div class="line number9 index8 alt2"><code class="python plain">beers_columns_rename </code><code class="python keyword">=</code> <code class="python plain">{</code></div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"id_beer"</code><code class="python plain">: </code><code class="python string">"id"</code><code class="python plain">,</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">"id_brewery"</code><code class="python plain">: </code><code class="python string">"brewery_id"</code></div><div class="line number12 index11 alt1"><code class="python plain">}</code></div><div class="line number13 index12 alt2"><code class="python plain">beers.rename(inplace</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">, columns</code><code class="python keyword">=</code><code class="python plain">beers_columns_rename)</code></div><div class="line number14 index13 alt1"><code class="python plain">beers.head(</code><code class="python value">5</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<table class="dataframe" border="1">
<thead>
<tr style="text-align: left;">
<th></th>
<th>abv</th>
<th>ibu</th>
<th>id</th>
<th>name</th>
<th>style</th>
<th>brewery_id</th>
<th>ounces</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.050</td>
<td>NaN</td>
<td>1436</td>
<td>Pub Beer</td>
<td>American Pale Lager</td>
<td>408</td>
<td>12.0</td>
</tr>
<tr>
<th>1</th>
<td>0.066</td>
<td>NaN</td>
<td>2265</td>
<td>Devil's Cup</td>
<td>American Pale Ale (APA)</td>
<td>177</td>
<td>12.0</td>
</tr>
<tr>
<th>2</th>
<td>0.071</td>
<td>NaN</td>
<td>2264</td>
<td>Rise of the Phoenix</td>
<td>American IPA</td>
<td>177</td>
<td>12.0</td>
</tr>
<tr>
<th>3</th>
<td>0.090</td>
<td>NaN</td>
<td>2263</td>
<td>Sinister</td>
<td>American Double / Imperial IPA</td>
<td>177</td>
<td>12.0</td>
</tr>
<tr>
<th>4</th>
<td>0.075</td>
<td>NaN</td>
<td>2262</td>
<td>Sex and Candy</td>
<td>American IPA</td>
<td>177</td>
<td>12.0</td>
</tr>
</tbody>
</table>
<h2 id="city-and-state-two-variables">City and State: Two Variables</h2>
<p>In the <code class="highlighter-rouge">breweries</code> dataset, the <code class="highlighter-rouge">brewery_location</code> column contains two variables: the <code class="highlighter-rouge">city</code> and the <code class="highlighter-rouge">state</code> in which the brewery is located in. To respect the tidy principles, we want to isolate each variable in a single column.</p>
<p>Technically, separating those two variables can be accomplished using the <code class="highlighter-rouge">split</code> function. This function will split the string it’s called on every time it encounters the delimiter passed as a parameter. In this case, our delimiter is a comma. The function will split the string every time it encounters this comma. The value returned by the function is a <em>list</em> of strings.</p>
<p>To run the <code class="highlighter-rouge">split</code> function on each value of the <code class="highlighter-rouge">brewery_location</code> <em>Series</em>, we use the <code class="highlighter-rouge">apply</code> function. This function will repetitively run code on each value of a <em>Series</em>. In this case, the code we run is a <a href="http://www.secnetix.de/olli/Python/lambda_functions.hawk">lamba</a>. This anonymous function splits the <code class="highlighter-rouge">brweery_location</code> string and returns the appropriate value, the <code class="highlighter-rouge">city</code> or <code class="highlighter-rouge">state</code>, in the list of returned strings.</p>
<div><div id="highlighter_398767" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">breweries[</code><code class="python string">"city"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">breweries[</code><code class="python string">"brewery_location"</code><code class="python plain">].</code><code class="python functions">apply</code><code class="python plain">(</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">lambda</code> <code class="python plain">location: location.split(</code><code class="python string">","</code><code class="python plain">)[</code><code class="python value">0</code><code class="python plain">])</code></div><div class="line number3 index2 alt2"><code class="python plain">breweries[</code><code class="python string">"state"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">breweries[</code><code class="python string">"brewery_location"</code><code class="python plain">].</code><code class="python functions">apply</code><code class="python plain">(</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">lambda</code> <code class="python plain">location: location.split(</code><code class="python string">","</code><code class="python plain">)[</code><code class="python value">1</code><code class="python plain">])</code></div><div class="line number5 index4 alt2"><code class="python plain">breweries </code><code class="python keyword">=</code> <code class="python plain">breweries[[</code><code class="python string">"brewery_name"</code><code class="python plain">, </code><code class="python string">"city"</code><code class="python plain">, </code><code class="python string">"state"</code><code class="python plain">]]</code></div><div class="line number6 index5 alt1"><code class="python plain">breweries.rename(inplace</code><code class="python keyword">=</code><code class="python color1">True</code><code class="python plain">, columns</code><code class="python keyword">=</code><code class="python plain">{</code><code class="python string">"brewery_name"</code><code class="python plain">: </code><code class="python string">"name"</code><code class="python plain">})</code></div></div></td></tr></tbody></table></div></div>
<table class="dataframe" border="1">
<thead>
<tr style="text-align: left;">
<th></th>
<th>name</th>
<th>city</th>
<th>state</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>NorthGate Brewing</td>
<td>Minneapolis</td>
<td>MN</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>Against the Grain Brewery</td>
<td>Louisville</td>
<td>KY</td>
<td>1</td>
</tr>
<tr>
<th>2</th>
<td>Jack's Abby Craft Lagers</td>
<td>Framingham</td>
<td>MA</td>
<td>2</td>
</tr>
<tr>
<th>3</th>
<td>Mike Hess Brewing Company</td>
<td>San Diego</td>
<td>CA</td>
<td>3</td>
</tr>
<tr>
<th>4</th>
<td>Fort Point Beer Company</td>
<td>San Francisco</td>
<td>CA</td>
<td>4</td>
</tr>
</tbody>
</table>
<h2 id="a-few-examples-of-strings-to-numerical-values">A few examples of strings to numerical values</h2>
<p>The <code class="highlighter-rouge">abv</code> and <code class="highlighter-rouge">ibu</code> should be numerical values but they contain some letters. The <code class="highlighter-rouge">abv</code> column, which represents the alcohol by volume, is stored as a string with a “%” instead of a floating number between 0 and 1. Secondly,  the <code class="highlighter-rouge">ibu</code> values are stored as strings while it should be integers. Some values are numbers while some others are a string “N/A”.</p>
<p>To fix this, I’ll <code class="highlighter-rouge">apply</code> some custom functions I created to clean up the data. You’ll notice that I am using <code class="highlighter-rouge">try</code> and <code class="highlighter-rouge">except</code>. The reason I am doing this is that I know my code will fail when it will encounter a string with letters. Therefore, if it fails due to <code class="highlighter-rouge">ValueError</code>, I return <code class="highlighter-rouge">None</code>. In the <em>DataFrame</em>, <code class="highlighter-rouge">None</code>  will be transformed to <code class="highlighter-rouge">NaN</code> which indicates missing data.</p>
<div><div id="highlighter_532933" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">string_pct_to_float(value):</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">stripped </code><code class="python keyword">=</code> <code class="python functions">str</code><code class="python plain">(value).strip(</code><code class="python string">'%'</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">try</code><code class="python plain">:</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python functions">float</code><code class="python plain">(stripped)</code><code class="python keyword">/</code><code class="python value">100</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">except</code> <code class="python plain">ValueError:&nbsp;&nbsp;&nbsp; </code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python color1">None</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">beers[</code><code class="python string">"abv"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">beers[</code><code class="python string">"abv"</code><code class="python plain">].</code><code class="python functions">apply</code><code class="python plain">(string_pct_to_float)</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python keyword">def</code> <code class="python plain">string_to_int(value):</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">try</code><code class="python plain">:</code></div><div class="line number12 index11 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python functions">int</code><code class="python plain">(value)</code></div><div class="line number13 index12 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">except</code> <code class="python plain">ValueError:&nbsp; </code></div><div class="line number14 index13 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python color1">None</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python plain">beers[</code><code class="python string">"ibu"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">beers[</code><code class="python string">"ibu"</code><code class="python plain">].</code><code class="python functions">apply</code><code class="python plain">(string_to_int)</code></div></div></td></tr></tbody></table></div></div>
<h2 id="size-to-ounces-strip-out-the-measurement-unit">Size to Ounces: Strip out the measurement unit</h2>
<p>Another problem with our dataset is that the <code class="highlighter-rouge">size</code> column contains a mix of numerical values and letters. The letters are used to indicate the measurement unit.</p>
<p>As I skimmed through the <code class="highlighter-rouge">size</code> column, I noticed the way the measurement unit was written was not consistent. Sometimes ounce was spelled <code class="highlighter-rouge">oz.</code>, <code class="highlighter-rouge">ounce</code>, <code class="highlighter-rouge">OZ.</code>, etc. In order to list all of the possible values we could be dealing with, I transformed the <code class="highlighter-rouge">size</code> column into a <code class="highlighter-rouge">set</code> and printed it. A <code class="highlighter-rouge">set</code> is a list that contains only unique values.</p>
<div><div id="highlighter_401302" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">for</code> <code class="python plain">possible_value </code><code class="python keyword">in</code> <code class="python functions">set</code><code class="python plain">(beers[</code><code class="python string">"size"</code><code class="python plain">].tolist()):</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(possible_value)</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="python comments">#=&gt; 16 oz.</code></div><div class="line number5 index4 alt2"><code class="python comments">#=&gt; 12 &amp; 16 oz.</code></div><div class="line number6 index5 alt1"><code class="python comments">#=&gt; 12 oz</code></div><div class="line number7 index6 alt2"><code class="python comments">#=&gt; 19.2 oz.</code></div><div class="line number8 index7 alt1"><code class="python comments">#=&gt; 16 oz</code></div><div class="line number9 index8 alt2"><code class="python comments">#=&gt; 12 ounce</code></div><div class="line number10 index9 alt1"><code class="python comments">#=&gt; 12 OZ.</code></div><div class="line number11 index10 alt2"><code class="python comments">#=&gt; 16.9 oz.</code></div><div class="line number12 index11 alt1"><code class="python comments">#=&gt; 12 oz.</code></div><div class="line number13 index12 alt2"><code class="python comments">#=&gt; 24 oz.</code></div><div class="line number14 index13 alt1"><code class="python comments">#=&gt; 32 oz.</code></div><div class="line number15 index14 alt2"><code class="python comments">#=&gt; 12 oz. Slimline</code></div><div class="line number16 index15 alt1"><code class="python comments">#=&gt; 19.2</code></div><div class="line number17 index16 alt2"><code class="python comments">#=&gt; 8.4 oz.</code></div><div class="line number18 index17 alt1"><code class="python comments">#=&gt; 24 oz. "Silo Can"</code></div><div class="line number19 index18 alt2"><code class="python comments">#=&gt; 16 oz. Alumi-Tek®</code></div><div class="line number20 index19 alt1"><code class="python comments">#=&gt; 16 oz. Alumi-Tek®&nbsp;&nbsp; </code></div><div class="line number21 index20 alt2"><code class="python comments">#=&gt; 12 oz.&nbsp;&nbsp;&nbsp; </code></div></div></td></tr></tbody></table></div></div>
<p>Now that we know the set of possible values we can be dealing with, we can write some code to parse the string and transform it into a numerical value. To do this, I used a regular expression that matches the first number encountered.</p>
<div><div id="highlighter_398463" class="syntaxhighlighter  python"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">def</code> <code class="python plain">extract_ounces(value):</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">stripped </code><code class="python keyword">=</code> <code class="python plain">value.strip(</code><code class="python string">"oz"</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">match </code><code class="python keyword">=</code> <code class="python plain">re.match(</code><code class="python string">"(\d{1,2}\.*\d*)"</code><code class="python plain">, value)</code></div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">if</code> <code class="python plain">match:</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python functions">float</code><code class="python plain">(match.group(</code><code class="python value">0</code><code class="python plain">))</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">else</code><code class="python plain">:</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python color1">None</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="python plain">beers[</code><code class="python string">"ounces"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">beers[</code><code class="python string">"size"</code><code class="python plain">].</code><code class="python functions">apply</code><code class="python plain">(extract_ounces)&nbsp;&nbsp;&nbsp; </code></div><div class="line number10 index9 alt1"><code class="python keyword">del</code> <code class="python plain">beers[</code><code class="python string">"size"</code><code class="python plain">]</code></div><div class="line number11 index10 alt2"><code class="python plain">beers.head(</code><code class="python value">5</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
<table class="dataframe" border="1">
<thead>
<tr style="text-align: left;">
<th></th>
<th>abv</th>
<th>ibu</th>
<th>id</th>
<th>name</th>
<th>style</th>
<th>brewery_id</th>
<th>ounces</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.050</td>
<td>N/A</td>
<td>1436</td>
<td>Pub Beer</td>
<td>American Pale Lager</td>
<td>408</td>
<td>12.0</td>
</tr>
<tr>
<th>1</th>
<td>0.066</td>
<td>N/A</td>
<td>2265</td>
<td>Devil's Cup</td>
<td>American Pale Ale (APA)</td>
<td>177</td>
<td>12.0</td>
</tr>
<tr>
<th>2</th>
<td>0.071</td>
<td>N/A</td>
<td>2264</td>
<td>Rise of the Phoenix</td>
<td>American IPA</td>
<td>177</td>
<td>12.0</td>
</tr>
<tr>
<th>3</th>
<td>0.090</td>
<td>N/A</td>
<td>2263</td>
<td>Sinister</td>
<td>American Double / Imperial IPA</td>
<td>177</td>
<td>12.0</td>
</tr>
<tr>
<th>4</th>
<td>0.075</td>
<td>N/A</td>
<td>2262</td>
<td>Sex and Candy</td>
<td>American IPA</td>
<td>177</td>
<td>12.0</td>
</tr>
</tbody>
</table>
<h2 id="ready-for-exploration">Ready for exploration</h2>
<p>We now have two clean datasets: <code class="highlighter-rouge">beers</code> and <code class="highlighter-rouge">breweries</code>. Each column has been cleaned up to respect the tidy principles. The code for this post is available <a href="https://github.com/nickhould/craft-beers-dataset">here on Github</a> and the <a href="https://www.kaggle.com/nickhould/craft-cans" target="_blank">data is available on Kaggle</a>.  We are now ready to start exploring those datasets.</p>
<p><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider.png" alt="" class="aligncenter size-full wp-image-6230" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider.png 1000w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider-300x8.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider-768x19.png 768w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2016/10/section-divider-100x3.png 100w" sizes="(max-width: 1000px) 100vw, 1000px" width="1000" height="25"></p>
<h2 id="bio">Bio</h2>
<p><img src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/jean-nicholas-hould-150x150.png" alt="Jean-Nicholas Hould" class="alignright size-thumbnail wp-image-6462" srcset="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/jean-nicholas-hould-150x150.png 150w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/jean-nicholas-hould-300x300.png 300w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/jean-nicholas-hould-100x100.png 100w, http://5047-presscdn.pagely.netdna-cdn.com/wp-content/uploads/2017/01/jean-nicholas-hould.png 348w" sizes="(max-width: 150px) 100vw, 150px" width="150" height="150">Hi, I'm Jean-Nicholas Hould. I've been working in data science for the last 6 years. I currently work at Intel Security where I do data analysis and engineering. I also write about my learning on <a href="http://www.jeannicholashould.com/" target="_blank">my data blog</a>. Reach out on Twitter <a href="https://twitter.com/nicholashould" target="_blank">@NicholasHould</a> if you have any questions!</p>
</div>
  

</div>

    </div>
  </article></div>
      <footer class="entry-footer cf">
    <a href="http://blog.kaggle.com/tag/open-data/" rel="tag">open data</a><a href="http://blog.kaggle.com/tag/python/" rel="tag">Python</a><a href="http://blog.kaggle.com/tag/tutorial/" rel="tag">Tutorial</a><a href="http://blog.kaggle.com/tag/web-scraping/" rel="tag">web scraping</a>    </footer>
        
  <div class="x-container max width">    
<div id="disqus_thread"><iframe id="dsq-app1" name="dsq-app1" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1px !important; min-width: 100% !important; border: medium none !important; overflow: hidden !important; height: 3841px !important;" src="https://disqus.com/embed/comments/?base=default&amp;f=kaggle&amp;t_i=6458%20http%3A%2F%2Fblog.kaggle.com%2F%3Fp%3D6458&amp;t_u=http%3A%2F%2Fblog.kaggle.com%2F2017%2F01%2F31%2Fscraping-for-craft-beers-a-dataset-creation-tutorial%2F&amp;t_e=Scraping%20for%20Craft%20Beers%3A%20A%20Dataset%20Creation%20Tutorial&amp;t_d=Scraping%20for%20Craft%20Beers%3A%20A%20Dataset%20Creation%20Tutorial&amp;t_t=Scraping%20for%20Craft%20Beers%3A%20A%20Dataset%20Creation%20Tutorial&amp;s_o=default&amp;l=#version=2da0f6ff2391ab0e884e9a07d6fe564c" horizontalscrolling="no" verticalscrolling="no" width="100%" frameborder="0"></iframe></div>

<script type="text/javascript">
var disqus_url = 'http://blog.kaggle.com/2017/01/31/scraping-for-craft-beers-a-dataset-creation-tutorial/';
var disqus_identifier = '6458 http://blog.kaggle.com/?p=6458';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'kaggle';
var disqus_title = "Scraping for Craft Beers: A Dataset Creation Tutorial";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    
    this.language = '';
        this.callbacks.onReady.push(function () {

        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = '?cf_action=sync_comments&post_id=6458';

        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

  </div>    
  </div>

      


  <aside class="x-sidebar nano" role="complementary">
    <div class="max width x-container" tabindex="0" style="padding-right: 34px; margin-right: -14px;">
              <div id="text-4" class="widget widget_text"><h4 class="h-widget">The Official Blog of Kaggle.com</h4>     <div class="textwidget"></div>
    </div><div id="search-3" class="widget widget_search">
<form method="get" id="searchform" class="form-search" action="http://blog.kaggle.com/">
  <label for="s" class="visually-hidden">Search</label>
  <input id="s" class="search-query" name="s" placeholder="Search" type="text">
</form></div><div id="categories-3" class="widget widget_categories"><h4 class="h-widget">Categories</h4>   <ul>
  <li class="cat-item cat-item-9"><a href="http://blog.kaggle.com/category/data-science-news/">Data Science News</a> (57)
</li>
  <li class="cat-item cat-item-3"><a href="http://blog.kaggle.com/category/kaggle-news/">Kaggle News</a> (127)
</li>
  <li class="cat-item cat-item-1538"><a href="http://blog.kaggle.com/category/kernels/">Kernels</a> (38)
</li>
  <li class="cat-item cat-item-1636"><a href="http://blog.kaggle.com/category/tutorials/">Tutorials</a> (40)
</li>
  <li class="cat-item cat-item-7"><a href="http://blog.kaggle.com/category/winners-interviews/">Winners' Interviews</a> (200)
</li>
    </ul>
</div><div id="mailchimpsf_widget-2" class="widget widget_mailchimpsf_widget"><h4 class="h-widget">Want to subscribe?</h4>  <style>
    .widget_mailchimpsf_widget .widget-title {
    line-height: 1.4em;
    margin-bottom: 0.75em;
  }
  #mc_subheader {
    line-height: 1.25em;
    margin-bottom: 18px;
  }
  .mc_merge_var {
    margin-bottom: 1.0em;
  }
  .mc_var_label,
  .mc_interest_label {
    display: block;
    margin-bottom: 0.5em;
  }
  .mc_input {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    width: 100%;
  }
  .mc_input.mc_phone {
    width: auto;
  }
  select.mc_select {
    margin-top: 0.5em;
    width: 100%;
  }
  .mc_address_label {
    margin-top: 1.0em;
    margin-bottom: 0.5em;
    display: block;
  }
  .mc_address_label ~ select {
    width: 100%;    
  }
  .mc_list li {
    list-style: none;
    background: none !important;
  }
  .mc_interests_header {
    margin-top: 1.0em;
    margin-bottom: 0.5em;
  }
  .mc_interest label,
  .mc_interest input {
    margin-bottom: 0.4em;
  }
  #mc_signup_submit {
    margin-top: 1.5em;
    width: 80%;
  }
  #mc_unsub_link a {
    font-size: 0.75em;
  }
  #mc_unsub_link {
    margin-top: 1.0em;
  }
  .mc_header_address,
  .mc_email_format {
    display: block;
    font-weight: bold;
    margin-top: 1.0em;
    margin-bottom: 0.5em;
  }
  .mc_email_options {
    margin-top: 0.5em;
  }
  .mc_email_type {
    padding-left: 4px;
  }
  </style>
  
<div id="mc_signup">
  <form method="post" action="#mc_signup" id="mc_signup_form">
    <input id="mc_submit_type" name="mc_submit_type" value="js" type="hidden">
    <input name="mcsf_action" value="mc_submit_signup_form" type="hidden">
    <input id="_mc_submit_signup_form_nonce" name="_mc_submit_signup_form_nonce" value="2b18da7126" type="hidden">    
    
  <div class="mc_form_inside">
    
    <div class="updated" id="mc_message">
          </div><!-- /mc_message -->

    
<div class="mc_merge_var">
    <label for="mc_mv_EMAIL" class="mc_var_label mc_header mc_header_email">Email Address<span class="mc_required">*</span></label>
  <input size="18" placeholder="" name="mc_mv_EMAIL" id="mc_mv_EMAIL" class="mc_input" type="text">
</div><!-- /mc_merge_var -->
<div class="mc_merge_var">
    <label for="mc_mv_FNAME" class="mc_var_label mc_header mc_header_text">First Name</label>
  <input size="18" placeholder="" name="mc_mv_FNAME" id="mc_mv_FNAME" class="mc_input" type="text">
</div><!-- /mc_merge_var -->
<div class="mc_merge_var">
    <label for="mc_mv_LNAME" class="mc_var_label mc_header mc_header_text">Last Name</label>
  <input size="18" placeholder="" name="mc_mv_LNAME" id="mc_mv_LNAME" class="mc_input" type="text">
</div><!-- /mc_merge_var -->      <div id="mc-indicates-required">
        * = required field      </div><!-- /mc-indicates-required -->
      
    <div class="mc_signup_submit">
      <input name="mc_signup_submit" id="mc_signup_submit" value="Sign me up!" class="button" type="submit">
    </div><!-- /mc_signup_submit -->
  
  
        
  </div><!-- /mc_form_inside -->
  </form><!-- /mc_signup_form -->
</div><!-- /mc_signup_container -->
  </div><div id="tag_cloud-3" class="widget widget_tag_cloud"><h4 class="h-widget">Popular Tags</h4><div class="tagcloud"><a href="http://blog.kaggle.com/tag/1-kaggler/" class="tag-link-1619 tag-link-position-1" title="4 topics">#1 Kaggler</a>
<a href="http://blog.kaggle.com/tag/annual-santa-competition/" class="tag-link-1605 tag-link-position-2" title="4 topics">Annual Santa Competition</a>
<a href="http://blog.kaggle.com/tag/binary-classification/" class="tag-link-1623 tag-link-position-3" title="10 topics">binary classification</a>
<a href="http://blog.kaggle.com/tag/community/" class="tag-link-91 tag-link-position-4" title="6 topics">community</a>
<a href="http://blog.kaggle.com/tag/computer-vision/" class="tag-link-1115 tag-link-position-5" title="8 topics">computer vision</a>
<a href="http://blog.kaggle.com/tag/convolutional-neural-networks/" class="tag-link-1593 tag-link-position-6" title="5 topics">convolutional neural networks</a>
<a href="http://blog.kaggle.com/tag/dark-matter/" class="tag-link-296 tag-link-position-7" title="8 topics">Dark Matter</a>
<a href="http://blog.kaggle.com/tag/data-visualization/" class="tag-link-1025 tag-link-position-8" title="4 topics">data visualization</a>
<a href="http://blog.kaggle.com/tag/deep-neural-networks/" class="tag-link-1592 tag-link-position-9" title="4 topics">deep neural networks</a>
<a href="http://blog.kaggle.com/tag/deloitte/" class="tag-link-280 tag-link-position-10" title="4 topics">Deloitte</a>
<a href="http://blog.kaggle.com/tag/diabetes/" class="tag-link-1037 tag-link-position-11" title="5 topics">diabetes</a>
<a href="http://blog.kaggle.com/tag/diabetic-retinopathy/" class="tag-link-1551 tag-link-position-12" title="4 topics">Diabetic Retinopathy</a>
<a href="http://blog.kaggle.com/tag/draper-satellite-image-chronology/" class="tag-link-1664 tag-link-position-13" title="4 topics">Draper Satellite Image Chronology</a>
<a href="http://blog.kaggle.com/tag/eeg-data/" class="tag-link-1565 tag-link-position-14" title="6 topics">EEG data</a>
<a href="http://blog.kaggle.com/tag/elo-chess-ratings-competition/" class="tag-link-1651 tag-link-position-15" title="10 topics">Elo Chess Ratings Competition</a>
<a href="http://blog.kaggle.com/tag/eurovision-challenge/" class="tag-link-1655 tag-link-position-16" title="5 topics">Eurovision Challenge</a>
<a href="http://blog.kaggle.com/tag/feature-engineering/" class="tag-link-1680 tag-link-position-17" title="4 topics">feature engineering</a>
<a href="http://blog.kaggle.com/tag/flight-quest/" class="tag-link-1438 tag-link-position-18" title="5 topics">Flight Quest</a>
<a href="http://blog.kaggle.com/tag/heritage-health-prize/" class="tag-link-10 tag-link-position-19" title="9 topics">Heritage Health Prize</a>
<a href="http://blog.kaggle.com/tag/how-much-did-it-rain/" class="tag-link-1539 tag-link-position-20" title="4 topics">How Much Did It Rain?</a>
<a href="http://blog.kaggle.com/tag/image-classification/" class="tag-link-1552 tag-link-position-21" title="7 topics">image classification</a>
<a href="http://blog.kaggle.com/tag/image-processing/" class="tag-link-436 tag-link-position-22" title="4 topics">image processing</a>
<a href="http://blog.kaggle.com/tag/intel/" class="tag-link-1503 tag-link-position-23" title="4 topics">Intel</a>
<a href="http://blog.kaggle.com/tag/kaggle-inclass/" class="tag-link-1577 tag-link-position-24" title="4 topics">Kaggle InClass</a>
<a href="http://blog.kaggle.com/tag/kagglers-in-careers/" class="tag-link-1690 tag-link-position-25" title="4 topics">kagglers in careers</a>
<a href="http://blog.kaggle.com/tag/kernels/" class="tag-link-1667 tag-link-position-26" title="25 topics">Kernels</a>
<a href="http://blog.kaggle.com/tag/logistic-regression/" class="tag-link-506 tag-link-position-27" title="5 topics">logistic regression</a>
<a href="http://blog.kaggle.com/tag/march-mania/" class="tag-link-1504 tag-link-position-28" title="17 topics">March Mania</a>
<a href="http://blog.kaggle.com/tag/multiclass-classification/" class="tag-link-1626 tag-link-position-29" title="13 topics">multiclass classification</a>
<a href="http://blog.kaggle.com/tag/natural-language-processing/" class="tag-link-357 tag-link-position-30" title="10 topics">natural language processing</a>
<a href="http://blog.kaggle.com/tag/open-data/" class="tag-link-1660 tag-link-position-31" title="10 topics">open data</a>
<a href="http://blog.kaggle.com/tag/open-data-spotlight/" class="tag-link-1687 tag-link-position-32" title="6 topics">open data spotlight</a>
<a href="http://blog.kaggle.com/tag/practice-fusion/" class="tag-link-57 tag-link-position-33" title="6 topics">Practice Fusion</a>
<a href="http://blog.kaggle.com/tag/product/" class="tag-link-148 tag-link-position-34" title="7 topics">Product</a>
<a href="http://blog.kaggle.com/tag/product-news/" class="tag-link-1609 tag-link-position-35" title="6 topics">Product News</a>
<a href="http://blog.kaggle.com/tag/profiling-top-kagglers/" class="tag-link-1586 tag-link-position-36" title="10 topics">Profiling Top Kagglers</a>
<a href="http://blog.kaggle.com/tag/recruiting/" class="tag-link-318 tag-link-position-37" title="5 topics">Recruiting</a>
<a href="http://blog.kaggle.com/tag/regression-problem/" class="tag-link-1625 tag-link-position-38" title="5 topics">regression problem</a>
<a href="http://blog.kaggle.com/tag/scikit-learn/" class="tag-link-1493 tag-link-position-39" title="13 topics">scikit-learn</a>
<a href="http://blog.kaggle.com/tag/scripts-of-the-week/" class="tag-link-1545 tag-link-position-40" title="12 topics">scripts of the week</a>
<a href="http://blog.kaggle.com/tag/tourism-forecasting/" class="tag-link-1647 tag-link-position-41" title="4 topics">Tourism Forecasting</a>
<a href="http://blog.kaggle.com/tag/tutorial/" class="tag-link-8 tag-link-position-42" title="10 topics">Tutorial</a>
<a href="http://blog.kaggle.com/tag/video-series/" class="tag-link-1534 tag-link-position-43" title="9 topics">video series</a>
<a href="http://blog.kaggle.com/tag/wikipedia-challenge/" class="tag-link-625 tag-link-position-44" title="4 topics">Wikipedia Challenge</a>
<a href="http://blog.kaggle.com/tag/xgboost/" class="tag-link-1559 tag-link-position-45" title="16 topics">XGBoost</a></div>
</div><div id="archives-3" class="widget widget_archive"><h4 class="h-widget">Archives</h4>   <label class="screen-reader-text" for="archives-dropdown-3">Archives</label>
    <select id="archives-dropdown-3" name="archive-dropdown" onchange="document.location.href=this.options[this.selectedIndex].value;">
      
      <option value="">Select Month</option>
        <option value="http://blog.kaggle.com/2017/04/"> April 2017 </option>
  <option value="http://blog.kaggle.com/2017/03/"> March 2017 </option>
  <option value="http://blog.kaggle.com/2017/02/"> February 2017 </option>
  <option value="http://blog.kaggle.com/2017/01/"> January 2017 </option>
  <option value="http://blog.kaggle.com/2016/12/"> December 2016 </option>
  <option value="http://blog.kaggle.com/2016/11/"> November 2016 </option>
  <option value="http://blog.kaggle.com/2016/10/"> October 2016 </option>
  <option value="http://blog.kaggle.com/2016/09/"> September 2016 </option>
  <option value="http://blog.kaggle.com/2016/08/"> August 2016 </option>
  <option value="http://blog.kaggle.com/2016/07/"> July 2016 </option>
  <option value="http://blog.kaggle.com/2016/06/"> June 2016 </option>
  <option value="http://blog.kaggle.com/2016/05/"> May 2016 </option>
  <option value="http://blog.kaggle.com/2016/04/"> April 2016 </option>
  <option value="http://blog.kaggle.com/2016/03/"> March 2016 </option>
  <option value="http://blog.kaggle.com/2016/02/"> February 2016 </option>
  <option value="http://blog.kaggle.com/2016/01/"> January 2016 </option>
  <option value="http://blog.kaggle.com/2015/12/"> December 2015 </option>
  <option value="http://blog.kaggle.com/2015/11/"> November 2015 </option>
  <option value="http://blog.kaggle.com/2015/10/"> October 2015 </option>
  <option value="http://blog.kaggle.com/2015/09/"> September 2015 </option>
  <option value="http://blog.kaggle.com/2015/08/"> August 2015 </option>
  <option value="http://blog.kaggle.com/2015/07/"> July 2015 </option>
  <option value="http://blog.kaggle.com/2015/06/"> June 2015 </option>
  <option value="http://blog.kaggle.com/2015/05/"> May 2015 </option>
  <option value="http://blog.kaggle.com/2015/04/"> April 2015 </option>
  <option value="http://blog.kaggle.com/2015/03/"> March 2015 </option>
  <option value="http://blog.kaggle.com/2015/02/"> February 2015 </option>
  <option value="http://blog.kaggle.com/2015/01/"> January 2015 </option>
  <option value="http://blog.kaggle.com/2014/12/"> December 2014 </option>
  <option value="http://blog.kaggle.com/2014/11/"> November 2014 </option>
  <option value="http://blog.kaggle.com/2014/09/"> September 2014 </option>
  <option value="http://blog.kaggle.com/2014/08/"> August 2014 </option>
  <option value="http://blog.kaggle.com/2014/07/"> July 2014 </option>
  <option value="http://blog.kaggle.com/2014/06/"> June 2014 </option>
  <option value="http://blog.kaggle.com/2014/05/"> May 2014 </option>
  <option value="http://blog.kaggle.com/2014/04/"> April 2014 </option>
  <option value="http://blog.kaggle.com/2014/03/"> March 2014 </option>
  <option value="http://blog.kaggle.com/2014/02/"> February 2014 </option>
  <option value="http://blog.kaggle.com/2014/01/"> January 2014 </option>
  <option value="http://blog.kaggle.com/2013/12/"> December 2013 </option>
  <option value="http://blog.kaggle.com/2013/11/"> November 2013 </option>
  <option value="http://blog.kaggle.com/2013/09/"> September 2013 </option>
  <option value="http://blog.kaggle.com/2013/08/"> August 2013 </option>
  <option value="http://blog.kaggle.com/2013/07/"> July 2013 </option>
  <option value="http://blog.kaggle.com/2013/06/"> June 2013 </option>
  <option value="http://blog.kaggle.com/2013/05/"> May 2013 </option>
  <option value="http://blog.kaggle.com/2013/04/"> April 2013 </option>
  <option value="http://blog.kaggle.com/2013/03/"> March 2013 </option>
  <option value="http://blog.kaggle.com/2013/02/"> February 2013 </option>
  <option value="http://blog.kaggle.com/2013/01/"> January 2013 </option>
  <option value="http://blog.kaggle.com/2012/12/"> December 2012 </option>
  <option value="http://blog.kaggle.com/2012/11/"> November 2012 </option>
  <option value="http://blog.kaggle.com/2012/10/"> October 2012 </option>
  <option value="http://blog.kaggle.com/2012/09/"> September 2012 </option>
  <option value="http://blog.kaggle.com/2012/08/"> August 2012 </option>
  <option value="http://blog.kaggle.com/2012/07/"> July 2012 </option>
  <option value="http://blog.kaggle.com/2012/06/"> June 2012 </option>
  <option value="http://blog.kaggle.com/2012/05/"> May 2012 </option>
  <option value="http://blog.kaggle.com/2012/04/"> April 2012 </option>
  <option value="http://blog.kaggle.com/2012/03/"> March 2012 </option>
  <option value="http://blog.kaggle.com/2012/02/"> February 2012 </option>
  <option value="http://blog.kaggle.com/2012/01/"> January 2012 </option>
  <option value="http://blog.kaggle.com/2011/12/"> December 2011 </option>
  <option value="http://blog.kaggle.com/2011/11/"> November 2011 </option>
  <option value="http://blog.kaggle.com/2011/10/"> October 2011 </option>
  <option value="http://blog.kaggle.com/2011/09/"> September 2011 </option>
  <option value="http://blog.kaggle.com/2011/08/"> August 2011 </option>
  <option value="http://blog.kaggle.com/2011/07/"> July 2011 </option>
  <option value="http://blog.kaggle.com/2011/06/"> June 2011 </option>
  <option value="http://blog.kaggle.com/2011/05/"> May 2011 </option>
  <option value="http://blog.kaggle.com/2011/04/"> April 2011 </option>
  <option value="http://blog.kaggle.com/2011/03/"> March 2011 </option>
  <option value="http://blog.kaggle.com/2011/02/"> February 2011 </option>
  <option value="http://blog.kaggle.com/2011/01/"> January 2011 </option>
  <option value="http://blog.kaggle.com/2010/12/"> December 2010 </option>
  <option value="http://blog.kaggle.com/2010/11/"> November 2010 </option>
  <option value="http://blog.kaggle.com/2010/10/"> October 2010 </option>
  <option value="http://blog.kaggle.com/2010/09/"> September 2010 </option>
  <option value="http://blog.kaggle.com/2010/08/"> August 2010 </option>
  <option value="http://blog.kaggle.com/2010/07/"> July 2010 </option>
  <option value="http://blog.kaggle.com/2010/06/"> June 2010 </option>
  <option value="http://blog.kaggle.com/2010/05/"> May 2010 </option>
  <option value="http://blog.kaggle.com/2010/04/"> April 2010 </option>

    </select>
    </div>          </div>
  <div class="nano-pane" style="display: none;"><div class="nano-slider" style="transform: translate(0px, 0px);"></div></div></aside>

  

  
  
    <div class="x-widgetbar collapse">
      <div class="x-widgetbar-inner">
        <div class="x-container max width">

          <div class="x-column x-md x-1-1 last"></div>
        </div>
      </div>
    </div>

    <a href="#" class="x-btn-widgetbar collapsed" data-toggle="collapse" data-target=".x-widgetbar">
      <i class="x-icon-plus-circle" data-x-icon=""><span class="visually-hidden">Toggle the Widgetbar</span></i>
    </a>

    
  

  
    <footer class="x-colophon bottom" role="contentinfo">
      <div class="x-container max width">

                  <div class="x-colophon-content">
                      </div>
        
                  <div class="x-social-global"><a href="https://www.facebook.com/kaggle" class="facebook" title="Facebook" target="_blank"><i class="x-icon-facebook-square" data-x-icon="" aria-hidden="true"></i></a><a href="https://twitter.com/kaggle" class="twitter" title="Twitter" target="_blank"><i class="x-icon-twitter-square" data-x-icon="" aria-hidden="true"></i></a></div>        
        
      </div>
    </footer>

  

  
   <!-- END #top.site -->

  
        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'kaggle';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1 && nodes[i].parentNode.tagName == 'A') {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
        <script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.9b"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0.9b"></script>
<script type="text/javascript">
  (function(){
    var corecss = document.createElement('link');
    var themecss = document.createElement('link');
    var corecssurl = "http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
    if ( corecss.setAttribute ) {
        corecss.setAttribute( "rel", "stylesheet" );
        corecss.setAttribute( "type", "text/css" );
        corecss.setAttribute( "href", corecssurl );
    } else {
        corecss.rel = "stylesheet";
        corecss.href = corecssurl;
    }
    document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
    var themecssurl = "http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
    if ( themecss.setAttribute ) {
        themecss.setAttribute( "rel", "stylesheet" );
        themecss.setAttribute( "type", "text/css" );
        themecss.setAttribute( "href", themecssurl );
    } else {
        themecss.rel = "stylesheet";
        themecss.href = themecssurl;
    }
    //document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
    document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
  })();
  SyntaxHighlighter.config.strings.expandSource = '+ expand source';
  SyntaxHighlighter.config.strings.help = '?';
  SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
  SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
  SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
  SyntaxHighlighter.defaults['pad-line-numbers'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wp-gif-player/js/play_gif.js?ver=1481361617"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/jetpack/_inc/spin.js?ver=1.3"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/wp-gif-player/inc/jquery.spin.js?ver=1.0"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/themes/x/framework/js/dist/site/x-body.min.js?ver=4.3.1"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/themes/x/framework/js/dist/site/x-icon.min.js?ver=4.3.1"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-includes/js/comment-reply.min.js?ver=4.7.3"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-content/plugins/cornerstone/assets/js/dist/site/cs-body.min.js?ver=1.1.3"></script>
<script type="text/javascript" src="http://5047-presscdn.pagely.netdna-cdn.com/wp-includes/js/wp-embed.min.js?ver=4.7.3"></script>

  
  

<iframe style="display: none;"></iframe></body></html>